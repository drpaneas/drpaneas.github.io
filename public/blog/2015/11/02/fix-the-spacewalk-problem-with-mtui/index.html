<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Fix the spacewalk problem with MTUI &middot; Panos Georgiadis</title>

  
  <link rel="stylesheet" href="https://w3.suse.de/~pgeorgiadis/public/css/poole.css">
  
  
  
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link href="/favicon.png" rel="icon">

  
  
  

  <meta name="description" content="Be able to prepare,update,downgrade without problems with spacewalk package from SUSE Manager">
  <meta name="keywords" content="panos georgiadis, panos, drpaneas, linux, programming, guitar, paok, opensuse, suse">
  
</head>
<body class="theme-base-08">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
        <img src="https://w3.suse.de/~pgeorgiadis/publicpanos.png" alt="panos" height="200" width="200" >
        <h1>Panos Georgiadis</h1>
      
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="https://w3.suse.de/~pgeorgiadis/public/">Blog</a></li>
      
      <li class="sidebar-nav-item"><a href="/~pgeorgiadis/public/about/">About Me</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      
      
      
      
      
    </ul>

   <p>Copyleft &copy; 2016 <a href="https://w3.suse.de/~pgeorgiadis/public/license">License</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1>Fix the spacewalk problem with MTUI</h1>
    <span class="post-date">Nov 2, 2015 &middot; 2 minute read
    </span>
    <div class="document">


<p>MTUI is not user-interactive; if there's a need for user
input (<em>e.g.</em> asking for y/n), the feedback dialog get's interrupted. This is
usually a usefull feature (and not a bug) because most of the commands we run
do not require user intervention, and if they do, then we have already taken
that into consideration. In case we don't, MTUI automatically cancels the
whole thing, which might be a problem in some rare cases -- and this is
one of them.</p>
<div class="section" id="spacewalk-problem">
<h1>Spacewalk problem</h1>
<p><em>Let's say</em> that you are trying to interact with zypper, and you want either
to <code class="bash">prepare</code>:</p>
<pre class="code bash literal-block">
mtui&gt; prepare all
info: preparing
critical: failed to prepare host nero.qam.suse.de. stopping.
<span class="comment"># /mounts/qam/rep-clean/rep-clean.sh -z
</span>Problem retrieving the repository index file <span class="keyword">for </span>service <span class="literal string single">'spacewalk'</span>:
<span class="operator">[</span>|<span class="operator">]</span> This system is not registered to any spacewalk server. If the system is not intended to be managed with spacewalk, please uninstall the zypp-plugin-spacewalk package.

Skipping service <span class="literal string single">'spacewalk'</span> because of the above error.
</pre>
<p>or <code class="bash">update</code>:</p>
<pre class="code bash literal-block">
mtui&gt; update all
info: preparing
critical: failed to update host nero.qam.suse.de. stopping.
<span class="comment"># /mounts/qam/rep-clean/rep-clean.sh -z
</span>Problem retrieving the repository index file <span class="keyword">for </span>service <span class="literal string single">'spacewalk'</span>:
<span class="operator">[</span>|<span class="operator">]</span> This system is not registered to any spacewalk server. If the system is not intended to be managed with spacewalk, please uninstall the zypp-plugin-spacewalk package.

Skipping service <span class="literal string single">'spacewalk'</span> because of the above error.
</pre>
<p>or <code class="bash">downgrade</code>:</p>
<pre class="code bash literal-block">
mtui&gt; downgrade tinker.qam.suse.de
info: downgrading
critical: failed to downgrade host tinker.qam.suse.de. stopping.
<span class="comment"># /mounts/qam/rep-clean/rep-clean.sh -z
</span>Problem retrieving the repository index file <span class="keyword">for </span>service <span class="literal string single">'spacewalk'</span>:
<span class="operator">[</span>|<span class="operator">]</span> This system is not registered to any spacewalk server. If the system is not intended to be managed with spacewalk, please uninstall the zypp-plugin-spacewalk package.

Skipping service <span class="literal string single">'spacewalk'</span> because of the above error.
</pre>
</div>
<div class="section" id="remove-the-spacewalk-and-try-again">
<h1>Remove the spacewalk and try again</h1>
<p>Just go to the ref-host that had the problem, and manually remove the
following packages.</p>
<ul class="simple">
<li>Before removing these packages please contact <strong>Adrej Semen</strong>.
These packages are required for SUSE Manager and if they
are installed in the ref-host it might be a good indication that he's
actually testing SUSE Manager at the moment.</li>
</ul>
<pre class="code bash literal-block">
zypper rm spacewalk-check spacewalk-client-setup spacewalk-client-tools spacewalksd zypp-plugin-spacewalk
</pre>
<p>then go back to MTUI and try again. Normally, it should work by now:</p>
<pre class="code bash literal-block">
mtui&gt; prepare nero.qam.suse.de
info: preparing
info: <span class="keyword">done</span>
</pre>
</div>
</div>
  </div>
  
</div>




<script src="https://w3.suse.de/~pgeorgiadis/public/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>